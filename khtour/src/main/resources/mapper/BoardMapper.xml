<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart42.khtour.mapper.BoardMapper">
	<resultMap type="Board" 				id="boardResultMap">
	<id 	column="board_num" 			property="boardNum"/>
	<result column="member_id" 				property="memberId"/>
	<result column="board_title" 			property="boardTitle"/>
	<result column="board_type" 			property="boardType"/>
	<result column="board_content" 			property="boardContent"/>
	<result column="board_hit" 				property="boardHit"/>
	<result column="board_date"				property="boardDate"/>
	</resultMap>
	
	<!-- 1:1문의게시판 리스트 조회 SQL -->
	<select id="getBoardList" resultMap="boardResultMap">
        SELECT
			b.board_num  
		   ,b.member_id     
		   ,b.board_title
		   ,b.board_type
		   ,b.board_content  
		   ,b.board_hit   
		   ,b.board_date
		FROM
			tb_board AS b;
    </select>

 	<!-- 코드에 따른 1:1문의 게시판 조회 SQL -->
   	<select id="getBoardByNum" parameterType="String" resultMap="boardResultMap">
      	SELECT
       		b.board_num  
		   ,b.member_id     
		   ,b.board_title
		   ,b.board_type
		   ,b.board_content  
		   ,b.board_hit   
		   ,b.board_date  
      	FROM
       		tb_board AS b
      	WHERE
         	board_num = #{boardNum};
   	</select>
   	
   	<!-- 1:1문의 등록 SQL -->
   	<insert id="addBoard" parameterType="Board">
		INSERT INTO
			tb_board
			( board_num 
			 ,member_id
			 ,board_title
			 ,board_type
			 ,board_content
			 ,board_date
		)VALUES (
			 #{boardNum}
			,#{memberId}
			,#{boardTitle}
			,#{boardType}
			,#{boardContent}
			,CURDATE()
		);
	</insert>
	
	<!-- 1:1문의 조회수 업데이트 SQL -->
	<update id="boardHitUpdate" parameterType="String"> 
		UPDATE
	 		tb_board 
	 	SET 
	 		board_hit = boardHit+1 
		WHERE
	 		board_num=#{boardNum} 
	</update>



</mapper>