<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart42.khtour.mapper.AccommodationMapper">

	<resultMap type="Accommodation" id="accommodationResultMap">
		<id column="ldg_code" property="ldgCode" />
		<result column="ldg_name" property="ldgName"/>
		<result column="ldg_type" property="ldgType"/>
		<result column="ldg_img" property="ldgImg"/>
		<result column="business_number" property="businessNumber"/>
		<result column="ldg_addr" property="ldgAddr"/>
		<result column="ldg_detail_addr" property="ldgDetailAddr"/>
		<result column="ldg_explain" property="ldgExplain"/>
		<result column="ldg_tel" property="ldgTel"/>
		<result column="ldg_phone" property="ldgPhone"/>
		<result column="ldg_email" property="ldgEmail"/>
	</resultMap>
	
	<!-- 숙박업소 등록 SQL -->
	<insert id="addaccommodation" parameterType="Accommodation">
		INSERT INTO tb_ldg_information
		(	 ldg_code
			,ldg_name
			,ldg_type
			,ldg_img
			,business_number
			,ldg_addr
			,ldg_detail_addr
			,ldg_explain
			,ldg_tel
			,ldg_phone
			,ldg_email
			,ldg_homepage
		)VALUES (
			 sf_new_ldg_code()
			,#{ldgName}
			,#{ldgType}
			,#{ldgImg}
			,#{businessNumber}
			,#{ldgAddr}
			,#{ldgDetailAddr}
			,#{ldgExplain}
			,#{ldgTel}
			,#{ldgPhone}
			,#{ldgEmail}
			,#{ldgHomepage}
		);   
	</insert>
	
	<!-- 숙박업소 목록 조회 SQL -->
	<select id="getAccommodationList" resultMap="accommodationResultMap">
		SELECT
			 l.ldg_code
			,l.ldg_name
			,l.ldg_type
			,l.ldg_img
			,l.business_number
			,l.ldg_addr
			,l.ldg_detail_addr
			,l.ldg_explain
			,l.ldg_tel
			,l.ldg_phone
			,l.ldg_email
		FROM 
			tb_ldg_information AS l;
	</select>
	
	<!-- 숙박업소 정보 수정 SQL -->
	<update id="modifyaccommodation" parameterType="Accommodation">
		UPDATE tb_ldg_information
		<trim prefix="SET" suffixOverrides=",">
			<if test="ldgName != null and ldgName != ''">
				ldg_name = #{ldgName},
			</if>
			<if test="ldgType != null and ldgType != ''">
				ldg_type = #{ldgType},
			</if>
			<if test="ldgImg != null and ldgImg != ''">
				ldg_img = #{ldgImg},
			</if>		
			<if test="businessNumber != null and businessNumber != ''">
				business_number = #{businessNumber},
			</if>
			<if test="ldgAddr != null and ldgAddr != ''">
				ldg_addr = #{ldgAddr},
			</if>
			<if test="ldgDetailAddr != null and ldgDetailAddr != ''">
				ldg_detail_addr = #{ldgDetailAddr},
			</if>
			<if test="ldgExplain != null and ldgExplain != ''">
				ldg_explain = #{ldgExplain},
			</if>		
			<if test="ldgTel != null and ldgTel != ''">
				ldg_tel = #{ldgTel},
			</if>		
			<if test="ldgPhone != null and ldgPhone != ''">
				ldg_phone = #{ldgPhone},
			</if>		
			<if test="ldgEmail != null and ldgEmail != ''">
				ldg_email = #{ldgEmail},
			</if>		
			<if test="ldgHomepage != null and ldgHomepage != ''">
				ldg_homepage = #{ldgHomepage},
			</if>		
		</trim>
		WHERE
			ldg_code = #{ldgCode};
	</update>
	
			

</mapper>